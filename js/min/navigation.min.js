"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}Array.from||(Array.from=function(){var e=Object.prototype.toString,l=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},i=Math.pow(2,53)-1,c=function(t){var e,n=(e=Number(t),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e);return Math.min(Math.max(n,0),i)};return function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,i=1<arguments.length?arguments[1]:void 0;if(void 0!==i){if(!l(i))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var r,o=c(e.length),a=l(this)?Object(new this(o)):new Array(o),s=0;s<o;)r=e[s],a[s]=i?void 0===n?i(r,s):i.call(n,r,s):r,s+=1;return a.length=o,a}}()),function(t,e){if(t){o(t,e),document.querySelector(".menu-toggle").addEventListener("click",function(){this.classList.contains("active")?(this.firstElementChild.textContent="Menu",this.setAttribute("aria-expanded","false"),t.classList.remove("open"),setTimeout(function(){o(t,e),t.classList.remove("active")},275)):(this.firstElementChild.textContent="Close",this.setAttribute("aria-expanded","true"),t.classList.add("active"),setTimeout(function(){o(t,e),t.classList.add("open")},50)),this.classList.toggle("active")}),_toConsumableArray(document.querySelectorAll(".arrow")).forEach(function(t){t.addEventListener("click",a)});var n=_toConsumableArray(document.querySelectorAll("#site-navigation li")),i=_toConsumableArray(document.querySelectorAll("#site-navigation a"));i.forEach(function(e){e.addEventListener("focus",function(){var t=function(t){for(var e=[];t&&"site-navigation"!==t.id;t=t.parentNode)e.unshift(t);return e}(e);n.forEach(function(t){t.classList.remove("focus")}),t[t.length-2].classList.contains("menu-item-has-children")&&e.parentElement.classList.add("focus"),t[t.length-3].classList.contains("sub-menu")&&t.forEach(function(t){"li"===t.localName&&t.classList.add("focus")})}),e.addEventListener("focusout",function(){n.forEach(function(t){t.classList.remove("focus")})})}),window.addEventListener("resize",function(){o(t,e)})}function r(t){return t.scrollHeight}function o(t,e){var n=r(t)+r(e)+200;t.style.transform="translateY(-"+n+"px)"}function a(){var t=this;0==this.nextElementSibling.style.maxHeight?(this.nextElementSibling.classList.add("open"),setTimeout(function(){t.nextElementSibling.style.maxHeight=t.nextElementSibling.scrollHeight+"px"},100)):(this.nextElementSibling.style.maxHeight=this.nextElementSibling.style.maxHeight=null,setTimeout(function(){t.nextElementSibling.classList.remove("open")},275)),this.classList.toggle("active")}}(document.getElementById("site-navigation"),document.getElementById("masthead"));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdmlnYXRpb24uanMiXSwibmFtZXMiOlsiQXJyYXkiLCJmcm9tIiwidG9TdHIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImlzQ2FsbGFibGUiLCJmbiIsImNhbGwiLCJtYXhTYWZlSW50ZWdlciIsIk1hdGgiLCJwb3ciLCJ0b0xlbmd0aCIsInZhbHVlIiwibnVtYmVyIiwibGVuIiwiTnVtYmVyIiwiaXNOYU4iLCJpc0Zpbml0ZSIsImZsb29yIiwiYWJzIiwibWluIiwibWF4IiwiYXJyYXlMaWtlIiwiaXRlbXMiLCJUeXBlRXJyb3IiLCJUIiwibWFwRm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJrVmFsdWUiLCJBIiwidGhpcyIsImsiLCJwYW5lbCIsImhlYWRlciIsInBvc2l0aW9uUGFuZWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJmaXJzdEVsZW1lbnRDaGlsZCIsInRleHRDb250ZW50Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlIiwic2V0VGltZW91dCIsImFkZCIsInRvZ2dsZSIsIl90b0NvbnN1bWFibGVBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbWVudCIsInRvZ2dsZVN1Yk1lbnUiLCJsaXMiLCJhbmNob3JzIiwiYW5jaG9yIiwicGFyZW50cyIsImVsZW0iLCJpZCIsInBhcmVudE5vZGUiLCJ1bnNoaWZ0IiwiZ2V0UGFyZW50cyIsImxpIiwicGFyZW50RWxlbWVudCIsInBhcmVudCIsImxvY2FsTmFtZSIsIndpbmRvdyIsImdldFBhbmVsSGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0Iiwib2Zmc2V0Iiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJfdGhpcyIsIm5leHRFbGVtZW50U2libGluZyIsIm1heEhlaWdodCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiOGRBQ09BLE1BQU1DLE9BQ1hELE1BQU1DLEtBQVMsV0FDYixJQUFJQyxFQUFRQyxPQUFPQyxVQUFVQyxTQUN6QkMsRUFBYSxTQUFVQyxHQUN6QixNQUFPLG1CQUFzQkEsR0FBTSxzQkFBd0JMLEVBQU1NLEtBQU1ELElBWXJFRSxFQUFpQkMsS0FBS0MsSUFBSyxFQUFHLElBQU8sRUFDckNDLEVBQVcsU0FBVUMsR0FDdkIsSUFYSUMsRUFXQUMsR0FYQUQsRUFBU0UsT0FXUUgsR0FWaEJJLE1BQU9ILEdBQ0gsRUFFSixJQUFNQSxHQUFZSSxTQUFVSixJQUd4QixFQUFJQSxFQUFTLEdBQUssR0FBTUosS0FBS1MsTUFBT1QsS0FBS1UsSUFBS04sSUFGOUNBLEdBT1QsT0FBT0osS0FBS1csSUFBS1gsS0FBS1ksSUFBS1AsRUFBSyxHQUFLTixJQUl2QyxPQUFPLFNBQWVjLEdBRXBCLElBR0lDLEVBQVFyQixPQUFRb0IsR0FHcEIsR0FBSyxNQUFRQSxFQUNYLE1BQU0sSUFBSUUsVUFBVyxvRUFJdkIsSUFDSUMsRUFEQUMsRUFBUSxFQUFJQyxVQUFVQyxPQUFTRCxVQUFVLFFBQUssRUFFbEQsUUFBSyxJQUF1QkQsRUFBUSxDQUlsQyxJQUFPckIsRUFBWXFCLEdBQ2pCLE1BQU0sSUFBSUYsVUFBVyxxRUFJbEIsRUFBSUcsVUFBVUMsU0FDakJILEVBQUlFLFVBQVUsSUFtQmxCLElBYkEsSUFZSUUsRUFaQWYsRUFBTUgsRUFBVVksRUFBTUssUUFNdEJFLEVBQUl6QixFQW5DQTBCLE1BbUNrQjdCLE9BQVEsSUFuQzFCNkIsS0FtQ2lDakIsSUFBVSxJQUFJZixNQUFPZSxHQUcxRGtCLEVBQUksRUFJQUEsRUFBSWxCLEdBQ1ZlLEVBQVNOLEVBQU1TLEdBRWJGLEVBQUVFLEdBRENOLE9BQ0ksSUFBdUJELEVBQUlDLEVBQU9HLEVBQVFHLEdBQU1OLEVBQU1uQixLQUFNa0IsRUFBR0ksRUFBUUcsR0FFdkVILEVBRVRHLEdBQUssRUFPUCxPQUhBRixFQUFFRixPQUFTZCxFQUdKZ0IsR0FoRkksSUFxRmYsU0FBVUcsRUFBT0MsR0FHakIsR0FBT0QsRUFBUCxDQWdCQUUsRUFBZUYsRUFBT0MsR0FHREUsU0FBU0MsY0FBZSxnQkFDaENDLGlCQUFrQixRQUFTLFdBQ2pDUCxLQUFLUSxVQUFVQyxTQUFVLFdBQzVCVCxLQUFLVSxrQkFBa0JDLFlBQWMsT0FDckNYLEtBQUtZLGFBQWMsZ0JBQWlCLFNBQ3BDVixFQUFNTSxVQUFVSyxPQUFRLFFBQ3hCQyxXQUFZLFdBQ1ZWLEVBQWVGLEVBQU9DLEdBQ3RCRCxFQUFNTSxVQUFVSyxPQUFRLFdBQ3ZCLE9BRUhiLEtBQUtVLGtCQUFrQkMsWUFBYyxRQUNyQ1gsS0FBS1ksYUFBYyxnQkFBaUIsUUFDcENWLEVBQU1NLFVBQVVPLElBQUssVUFDckJELFdBQVksV0FDVlYsRUFBZUYsRUFBT0MsR0FDdEJELEVBQU1NLFVBQVVPLElBQUssU0FDcEIsS0FHTGYsS0FBS1EsVUFBVVEsT0FBUSxZQUliQyxtQkFBUVosU0FBU2EsaUJBQWtCLFdBQ3hDQyxRQUFTLFNBQUFDLEdBQ2RBLEVBQVFiLGlCQUFrQixRQUFTYyxLQW1CckMsSUFBTUMsRUFBR0wsbUJBQVFaLFNBQVNhLGlCQUFrQix3QkFDdENLLEVBQU9OLG1CQUFRWixTQUFTYSxpQkFBa0IsdUJBY2hESyxFQUFRSixRQUFTLFNBQUFLLEdBQ2ZBLEVBQU9qQixpQkFBa0IsUUFBUyxXQUNoQyxJQUFNa0IsRUFiUyxTQUFVQyxHQUUzQixJQURBLElBQU1ELEVBQVUsR0FDUkMsR0FDRCxvQkFBc0JBLEVBQUtDLEdBRHBCRCxFQUFPQSxFQUFLRSxXQUl4QkgsRUFBUUksUUFBU0gsR0FFbkIsT0FBT0QsRUFLV0ssQ0FBWU4sR0FFNUJGLEVBQUlILFFBQVMsU0FBQVksR0FDWEEsRUFBR3ZCLFVBQVVLLE9BQVEsV0FJbEJZLEVBQVFBLEVBQVE1QixPQUFTLEdBQUdXLFVBQVVDLFNBQVUsMkJBQ25EZSxFQUFPUSxjQUFjeEIsVUFBVU8sSUFBSyxTQUlqQ1UsRUFBUUEsRUFBUTVCLE9BQVMsR0FBR1csVUFBVUMsU0FBVSxhQUNuRGdCLEVBQVFOLFFBQVMsU0FBQWMsR0FDVixPQUFTQSxFQUFPQyxXQUNuQkQsRUFBT3pCLFVBQVVPLElBQUssYUFPOUJTLEVBQU9qQixpQkFBa0IsV0FBWSxXQUNuQ2UsRUFBSUgsUUFBUyxTQUFBWSxHQUNYQSxFQUFHdkIsVUFBVUssT0FBUSxlQUszQnNCLE9BQU81QixpQkFBa0IsU0FBVSxXQUNqQ0gsRUFBZUYsRUFBT0MsS0ExR3hCLFNBQVNpQyxFQUFnQmxDLEdBQ3ZCLE9BQU9BLEVBQU1tQyxhQUlmLFNBQVNqQyxFQUFlRixFQUFPQyxHQUM3QixJQUFNbUMsRUFBU0YsRUFBZ0JsQyxHQUFVa0MsRUFBZ0JqQyxHQUFXLElBQ3BFRCxFQUFNcUMsTUFBTUMsVUFBWSxlQUFpQkYsRUFBUyxNQW9DcEQsU0FBU2pCLElBQWdCLElBQUFvQixFQUFBekMsS0FDbEIsR0FBS0EsS0FBSzBDLG1CQUFtQkgsTUFBTUksV0FDdEMzQyxLQUFLMEMsbUJBQW1CbEMsVUFBVU8sSUFBSyxRQUN2Q0QsV0FBWSxXQUNWMkIsRUFBS0MsbUJBQW1CSCxNQUFNSSxVQUFZRixFQUFLQyxtQkFBbUJMLGFBQWUsTUFDaEYsT0FFSHJDLEtBQUswQyxtQkFBbUJILE1BQU1JLFVBQVkzQyxLQUFLMEMsbUJBQW1CSCxNQUFNSSxVQUFZLEtBQ3BGN0IsV0FBWSxXQUNWMkIsRUFBS0MsbUJBQW1CbEMsVUFBVUssT0FBUSxTQUN6QyxNQUVMYixLQUFLUSxVQUFVUSxPQUFRLFdBL0R6QixDQXFIQ1gsU0FBU3VDLGVBQWdCLG1CQUFxQnZDLFNBQVN1QyxlQUFnQiIsImZpbGUiOiJuYXZpZ2F0aW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEFycmF5LmZyb20oKSBwb2x5ZmlsbFxuaWYgKCAhIEFycmF5LmZyb20gKSB7XG4gIEFycmF5LmZyb20gPSAoIGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG4gICAgdmFyIGlzQ2FsbGFibGUgPSBmdW5jdGlvbiggZm4gKSB7XG4gICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGZuIHx8ICdbb2JqZWN0IEZ1bmN0aW9uXScgPT09IHRvU3RyLmNhbGwoIGZuICk7XG4gICAgfTtcbiAgICB2YXIgdG9JbnRlZ2VyID0gZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgdmFyIG51bWJlciA9IE51bWJlciggdmFsdWUgKTtcbiAgICAgIGlmICggaXNOYU4oIG51bWJlciApICkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlmICggMCA9PT0gbnVtYmVyIHx8ICEgaXNGaW5pdGUoIG51bWJlciApICkge1xuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuICggMCA8IG51bWJlciA/IDEgOiAtMSApICogTWF0aC5mbG9vciggTWF0aC5hYnMoIG51bWJlciApICk7XG4gICAgfTtcbiAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdyggMiwgNTMgKSAtIDE7XG4gICAgdmFyIHRvTGVuZ3RoID0gZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgdmFyIGxlbiA9IHRvSW50ZWdlciggdmFsdWUgKTtcbiAgICAgIHJldHVybiBNYXRoLm1pbiggTWF0aC5tYXgoIGxlbiwgMCApLCBtYXhTYWZlSW50ZWdlciApO1xuICAgIH07XG5cbiAgICAvLyBUaGUgbGVuZ3RoIHByb3BlcnR5IG9mIHRoZSBmcm9tIG1ldGhvZCBpcyAxLlxuICAgIHJldHVybiBmdW5jdGlvbiBmcm9tKCBhcnJheUxpa2UvKiwgbWFwRm4sIHRoaXNBcmcgKi8gKSB7XG4gICAgICAvLyAxLiBMZXQgQyBiZSB0aGUgdGhpcyB2YWx1ZS5cbiAgICAgIHZhciBDID0gdGhpcztcblxuICAgICAgLy8gMi4gTGV0IGl0ZW1zIGJlIFRvT2JqZWN0KGFycmF5TGlrZSkuXG4gICAgICB2YXIgaXRlbXMgPSBPYmplY3QoIGFycmF5TGlrZSApO1xuXG4gICAgICAvLyAzLiBSZXR1cm5JZkFicnVwdChpdGVtcykuXG4gICAgICBpZiAoIG51bGwgPT0gYXJyYXlMaWtlICkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCAnQXJyYXkuZnJvbSByZXF1aXJlcyBhbiBhcnJheS1saWtlIG9iamVjdCAtIG5vdCBudWxsIG9yIHVuZGVmaW5lZCcgKTtcbiAgICAgIH1cblxuICAgICAgLy8gNC4gSWYgbWFwZm4gaXMgdW5kZWZpbmVkLCB0aGVuIGxldCBtYXBwaW5nIGJlIGZhbHNlLlxuICAgICAgdmFyIG1hcEZuID0gMSA8IGFyZ3VtZW50cy5sZW5ndGggPyBhcmd1bWVudHNbMV0gOiB2b2lkIHVuZGVmaW5lZDtcbiAgICAgIHZhciBUO1xuICAgICAgaWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG1hcEZuICkge1xuXG4gICAgICAgIC8vIDUuIGVsc2VcbiAgICAgICAgLy8gNS4gYSBJZiBJc0NhbGxhYmxlKG1hcGZuKSBpcyBmYWxzZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICBpZiAoICEgaXNDYWxsYWJsZSggbWFwRm4gKSApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCAnQXJyYXkuZnJvbTogd2hlbiBwcm92aWRlZCwgdGhlIHNlY29uZCBhcmd1bWVudCBtdXN0IGJlIGEgZnVuY3Rpb24nICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA1LiBiLiBJZiB0aGlzQXJnIHdhcyBzdXBwbGllZCwgbGV0IFQgYmUgdGhpc0FyZzsgZWxzZSBsZXQgVCBiZSB1bmRlZmluZWQuXG4gICAgICAgIGlmICggMiA8IGFyZ3VtZW50cy5sZW5ndGggKSB7XG4gICAgICAgICAgVCA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyAxMC4gTGV0IGxlblZhbHVlIGJlIEdldChpdGVtcywgXCJsZW5ndGhcIikuXG4gICAgICAvLyAxMS4gTGV0IGxlbiBiZSBUb0xlbmd0aChsZW5WYWx1ZSkuXG4gICAgICB2YXIgbGVuID0gdG9MZW5ndGgoIGl0ZW1zLmxlbmd0aCApO1xuXG4gICAgICAvLyAxMy4gSWYgSXNDb25zdHJ1Y3RvcihDKSBpcyB0cnVlLCB0aGVuXG4gICAgICAvLyAxMy4gYS4gTGV0IEEgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NvbnN0cnVjdF1dIGludGVybmFsIG1ldGhvZFxuICAgICAgLy8gb2YgQyB3aXRoIGFuIGFyZ3VtZW50IGxpc3QgY29udGFpbmluZyB0aGUgc2luZ2xlIGl0ZW0gbGVuLlxuICAgICAgLy8gMTQuIGEuIEVsc2UsIExldCBBIGJlIEFycmF5Q3JlYXRlKGxlbikuXG4gICAgICB2YXIgQSA9IGlzQ2FsbGFibGUoIEMgKSA/IE9iamVjdCggbmV3IEMoIGxlbiApICkgOiBuZXcgQXJyYXkoIGxlbiApO1xuXG4gICAgICAvLyAxNi4gTGV0IGsgYmUgMC5cbiAgICAgIHZhciBrID0gMDtcblxuICAgICAgLy8gMTcuIFJlcGVhdCwgd2hpbGUgayA8IGxlbsOi4oKswqYgKGFsc28gc3RlcHMgYSAtIGgpXG4gICAgICB2YXIga1ZhbHVlO1xuICAgICAgd2hpbGUgKCBrIDwgbGVuICkge1xuICAgICAgICBrVmFsdWUgPSBpdGVtc1trXTtcbiAgICAgICAgaWYgKCBtYXBGbiApIHtcbiAgICAgICAgICBBW2tdID0gJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBUID8gbWFwRm4oIGtWYWx1ZSwgayApIDogbWFwRm4uY2FsbCggVCwga1ZhbHVlLCBrICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgQVtrXSA9IGtWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBrICs9IDE7XG4gICAgICB9XG5cbiAgICAgIC8vIDE4LiBMZXQgcHV0U3RhdHVzIGJlIFB1dChBLCBcImxlbmd0aFwiLCBsZW4sIHRydWUpLlxuICAgICAgQS5sZW5ndGggPSBsZW47XG5cbiAgICAgIC8vIDIwLiBSZXR1cm4gQS5cbiAgICAgIHJldHVybiBBO1xuICAgIH07XG4gIH0oKSApO1xufVxuXG4oIGZ1bmN0aW9uKCBwYW5lbCwgaGVhZGVyICkge1xuXG4gIC8vIEtpbGwgdGhlIHNjcmlwdCBpZiB0aGVyZSBpcyBubyBtYWluIG1lbnUgaXRlbVxuICBpZiAoICEgcGFuZWwgKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBoZWlnaHQgb2Ygb3VyIHBhbmVsXG4gIGZ1bmN0aW9uIGdldFBhbmVsSGVpZ2h0KCBwYW5lbCApIHtcbiAgICByZXR1cm4gcGFuZWwuc2Nyb2xsSGVpZ2h0O1xuICB9XG5cbiAgLy8gR2V0IG91ciBwYW5lbCBpbiBwbGFjZVxuICBmdW5jdGlvbiBwb3NpdGlvblBhbmVsKCBwYW5lbCwgaGVhZGVyICkge1xuICAgIGNvbnN0IG9mZnNldCA9IGdldFBhbmVsSGVpZ2h0KCBwYW5lbCApICsgZ2V0UGFuZWxIZWlnaHQoIGhlYWRlciApICsgMjAwO1xuICAgIHBhbmVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKC0nICsgb2Zmc2V0ICsgJ3B4KSc7XG4gIH1cblxuICAvLyBTZXQgcGFuZWwgaW5pdGlhbCBwb3NpdGlvblxuICBwb3NpdGlvblBhbmVsKCBwYW5lbCwgaGVhZGVyICk7XG5cbiAgLyoqKioqIFRPR0dMRSBNQUlOIE1FTlUgKioqKioqL1xuICBjb25zdCBtb2JpbGVUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCAnLm1lbnUtdG9nZ2xlJyApO1xuICBtb2JpbGVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCB0aGlzLmNsYXNzTGlzdC5jb250YWlucyggJ2FjdGl2ZScgKSApIHtcbiAgICAgIHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSAnTWVudSc7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnICk7XG4gICAgICBwYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCAnb3BlbicgKTtcbiAgICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICAgcG9zaXRpb25QYW5lbCggcGFuZWwsIGhlYWRlciApO1xuICAgICAgICBwYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCAnYWN0aXZlJyApO1xuICAgICAgfSwgMjc1ICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQgPSAnQ2xvc2UnO1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ3RydWUnICk7XG4gICAgICBwYW5lbC5jbGFzc0xpc3QuYWRkKCAnYWN0aXZlJyApO1xuICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICBwb3NpdGlvblBhbmVsKCBwYW5lbCwgaGVhZGVyICk7XG4gICAgICAgIHBhbmVsLmNsYXNzTGlzdC5hZGQoICdvcGVuJyApO1xuICAgICAgfSwgNTAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoICdhY3RpdmUnICk7XG4gIH0pO1xuXG4gIC8qKioqKiBUT0dHTEUgU1VCTUVOVVMgKioqKioqL1xuICBjb25zdCBhcnJvd3MgPSBbIC4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcuYXJyb3cnICkgXTtcbiAgYXJyb3dzLmZvckVhY2goIGVsZW1lbnQgPT4ge1xuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgdG9nZ2xlU3ViTWVudSApO1xuICB9KTtcblxuICBmdW5jdGlvbiB0b2dnbGVTdWJNZW51KCkge1xuICAgIGlmICggMCA9PSB0aGlzLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5tYXhIZWlnaHQgKSB7XG4gICAgICB0aGlzLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKCAnb3BlbicgKTtcbiAgICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICAgdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuc3R5bGUubWF4SGVpZ2h0ID0gdGhpcy5uZXh0RWxlbWVudFNpYmxpbmcuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcbiAgICAgIH0sIDEwMCApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5tYXhIZWlnaHQgPSB0aGlzLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xuICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICB0aGlzLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKCAnb3BlbicgKTtcbiAgICAgIH0sIDI3NSApO1xuICAgIH1cbiAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoICdhY3RpdmUnICk7XG4gIH1cblxuICAvKioqKiogQTExWSAqKioqKiovXG4gIGNvbnN0IGxpcyA9IFsgLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJyNzaXRlLW5hdmlnYXRpb24gbGknICkgXTtcbiAgY29uc3QgYW5jaG9ycyA9IFsgLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJyNzaXRlLW5hdmlnYXRpb24gYScgKSBdO1xuXG4gIC8vIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBhcnJheSBvZiBhbiBlbGVtZW50cyBwYXJlbnRzICh1cCB0byB0aGUgI3NpdGUtbmF2aWdhdGlvbiBub2RlKVxuICBjb25zdCBnZXRQYXJlbnRzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG4gICAgY29uc3QgcGFyZW50cyA9IFtdO1xuICAgIGZvciAoIDsgZWxlbTsgZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSApIHtcbiAgICAgIGlmICggJ3NpdGUtbmF2aWdhdGlvbicgPT09IGVsZW0uaWQgKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcGFyZW50cy51bnNoaWZ0KCBlbGVtICk7XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnRzO1xuICB9O1xuXG4gIGFuY2hvcnMuZm9yRWFjaCggYW5jaG9yID0+IHtcbiAgICBhbmNob3IuYWRkRXZlbnRMaXN0ZW5lciggJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyZW50cyA9IGdldFBhcmVudHMoIGFuY2hvciApO1xuXG4gICAgICBsaXMuZm9yRWFjaCggbGkgPT4ge1xuICAgICAgICBsaS5jbGFzc0xpc3QucmVtb3ZlKCAnZm9jdXMnICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gSWYgYSBvbmUgbGV2ZWwgZHJvcGRvd24sIGFkZCBhIGZvY3VzIGNsYXNzIHRvIHRoZSBsaVxuICAgICAgaWYgKCBwYXJlbnRzW3BhcmVudHMubGVuZ3RoIC0gMl0uY2xhc3NMaXN0LmNvbnRhaW5zKCAnbWVudS1pdGVtLWhhcy1jaGlsZHJlbicgKSApIHtcbiAgICAgICAgYW5jaG9yLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCggJ2ZvY3VzJyApO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiBhIG1vcmUgdGhhbiBhIG9uZSBsZXZlbCBkcm9wZG93biwgYWRkIGEgZm9jdXMgY2xhc3MgZWFjaCBsaSBpbiB0aGUgXCJwYXJlbnRzXCIgYXJyYXlcbiAgICAgIGlmICggcGFyZW50c1twYXJlbnRzLmxlbmd0aCAtIDNdLmNsYXNzTGlzdC5jb250YWlucyggJ3N1Yi1tZW51JyApICkge1xuICAgICAgICBwYXJlbnRzLmZvckVhY2goIHBhcmVudCA9PiB7XG4gICAgICAgICAgaWYgKCAnbGknID09PSBwYXJlbnQubG9jYWxOYW1lICkge1xuICAgICAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5hZGQoICdmb2N1cycgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gUmVzZXQgYWxsIGxpJ3Mgd2hlbiBmb2N1cyBpcyByZW1vdmVkXG4gICAgYW5jaG9yLmFkZEV2ZW50TGlzdGVuZXIoICdmb2N1c291dCcsICgpID0+IHtcbiAgICAgIGxpcy5mb3JFYWNoKCBsaSA9PiB7XG4gICAgICAgIGxpLmNsYXNzTGlzdC5yZW1vdmUoICdmb2N1cycgKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggJ3Jlc2l6ZScsIGZ1bmN0aW9uKCkge1xuICAgIHBvc2l0aW9uUGFuZWwoIHBhbmVsLCBoZWFkZXIgKTtcbiAgfSk7XG5cbn0oIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnc2l0ZS1uYXZpZ2F0aW9uJyApLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggJ21hc3RoZWFkJyApICkgKTtcbiJdfQ==
